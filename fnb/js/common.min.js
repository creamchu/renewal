/**
 * --------------------------------
 * COMMON JS
 * creator : chowoobin
 * --------------------------------
*/
var fn = (function() {
	"use strict";

	return {
		//공통
		common : function(){

			//optionEaUp
			fn.optionEaUp();

			//optionEaDown
			fn.optionEaDown();
		},

		//lnbswiper
		lnbswiper : function(){
			var lnbNum = $('.lnbswiper .swiper-slide.is-active').index();
			var lnbSwiper = new Swiper(".lnbswiper", {
				slidesPerView: "auto",
				spaceBetween: 0,
				initialSlide: lnbNum,
				navigation: {
				  nextEl: '.swiper-button-next',
				  prevEl: '.swiper-button-prev',
				},
			});

			$(".lnblist .swiper-slide").on("click", function(){
				if(!$(this).hasClass("is-active")){
					$(this).addClass("is-active").siblings().removeClass("is-active");
				}
			});
		},

		//productswiper
		productswiper : function(){

			/* 2024-10-02 스와이프 수정 */
			var productswiper = new Swiper('.productswiper', {
				slidesPerView: 4,
				grid: {
					rows: 2,
				},
				speed: 400,
				slidesPerGroup: 4,
				spaceBetween: 40,
				allowTouchMove: false,
				navigation: {
					nextEl: ".swiper-button-next",
					prevEl: ".swiper-button-prev",
				},
				pagination: {
					el: '.swiper-pagination',
					clickable: true,
				},
			});
			
			/* 2024-10-02 스와이퍼 업데이트 추가 */
			$(document).on('click', '.lnbswiper .swiper-slide', function(e){
				productswiper.update();
			});

			/* S : 테스트용 js로 참고만 해주세요 */
			$(document).on('click', '.lnbswiper .tab1', function(e){
				$(".productlist .tab1").remove();
				$(".productlist .tab2").remove();
				$(".productlist .tab3").remove();
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab1"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭1</em><strong class="price">￦ 129,000</strong></a></div>');
			})
			$(document).on('click', '.lnbswiper .tab2', function(e){
				$(".productlist .tab1").remove();
				$(".productlist .tab2").remove();
				$(".productlist .tab3").remove();
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab2"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭2</em><strong class="price">￦ 129,000</strong></a></div>');
			})
			$(document).on('click', '.lnbswiper .tab3', function(e){
				$(".productlist .tab1").remove();
				$(".productlist .tab2").remove();
				$(".productlist .tab3").remove();
				productswiper.appendSlide('<div class="swiper-slide tab3"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭3</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab3"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭3</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab3"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭3</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab3"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭3</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab3"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭3</em><strong class="price">￦ 129,000</strong></a></div>');
				productswiper.appendSlide('<div class="swiper-slide tab3"><a href="javascript:;"><div class="images"><img src="../img/img_temp.jpg" alt="상품이미지"></div><em class="tit">탭3</em><strong class="price">￦ 129,000</strong></a></div>');
			})
			/* E : 테스트용 js로 참고만 해주세요 */
		},

		//resultlist 높이 제어
		/* 2024-10-02 css로 제어하도록 수정 */
		/* resultlist : function(){
			if($(".resultlist").length > 0) {
				var headerH, lnblistH, productlistH, btnareaH;
				headerH = $(".header").outerHeight(),
				lnblistH = $(".lnblist").outerHeight(),
				productlistH = $(".productlist").outerHeight(),
				btnareaH = $(".btn_area").outerHeight();

				var body = $(window).outerHeight();
				var resultlistH = body - headerH - lnblistH - productlistH - btnareaH;
				$(".resultlist").css("height",resultlistH);
			}
		},

		//cartlist 높이 제어
		cartlist : function(){
			if($(".cartlist").length > 0) {
				var headerH, allclearH, productlistH, btnareaH;
				headerH = $(".header").outerHeight(),
				allclearH = $(".cart .allclear").outerHeight(),
				btnareaH = $(".cart .btn_area").outerHeight();

				var body = $(window).outerHeight();
				var cartlistH = body - headerH - allclearH - btnareaH;
				$(".cartlist").css("height",cartlistH);
			}
		},
		*/

		//옵션 수량 올리기
		optionEaUp : function(obj){
			var $obj = $(obj),
				eaVal = parseInt($obj.siblings("input").val()),
				max = parseInt($obj.siblings("input").attr("max")) || 0;

			if ( max ){
				if ( eaVal < max ){
					eaVal++;
				}
			}else{
				eaVal++;
			}
			$obj.siblings("input").val(eaVal);

		},

		//옵션 수량 내리기
		optionEaDown : function(obj){
			var $obj = $(obj),
				eaVal = parseInt($obj.siblings("input").val()),
				min = parseInt($obj.siblings("input").attr("min")) || 0;


			if ( $obj.siblings("input[min]").length ){
				if ( eaVal > min ){
					eaVal--;
				}
			}else{
				if ( eaVal > 1 ){
					eaVal--;
				}
			}
			$obj.siblings("input").val(eaVal);
		},

		//popupOpen
		popupOpen : function(obj){
			$("body").addClass("pop_open");

			var $this = $(obj);
			$this.addClass("is_open");

		},

		//popupClose
		popupClose : function(obj){
			$("body").removeClass("pop_open");
			
			var $this = $(obj);
			$this.closest(".popup").removeClass("is_open");
		},

		//keypad
		keypad : function(obj){
			var nowNum = $(".inp_num").val();
			$(".keypad .btn_keypad").on("click", function(){
				if (nowNum.length < 11) {
					var pressNum = $(this).text();
					nowNum += pressNum;
					$(".inp_num").val(nowNum);
                    if(nowNum.length == 11) {
                        $(".btn_send").removeAttr("disabled");
                    }
				}
			});
			$(".keypad .btn_del").on("click", function(){
				var totalNum = $(".inp_num").val().replace(/[^0-9]/g, "").slice(0,-1);
				$(".inp_num").val(totalNum);
				nowNum = totalNum;
                $(".btn_send").attr("disabled",true);
			});
			$(".keypad .btn_clear").on("click", function(){
				$(".inp_num").val("");
				nowNum = "";
                $(".btn_send").attr("disabled",true);
			});
            $(".btn_send").on("click", function(){
                $(".btn_send").attr("disabled",true);
            });
		},

		//keypad2
		keypad2 : function(obj){
			var nowNum2 = $(".inp_certify").val();
			$(".keypad2 .btn_keypad").on("click", function(){
				if (nowNum2.length < 6) {
					var pressNum2 = $(this).text();
					nowNum2 += pressNum2;
					$(".inp_certify").val(nowNum2);
                    if(nowNum2.length == 6) {
                        $(".btn_confirm").removeAttr("disabled"); 
                    }
				}
			});
			$(".keypad2 .btn_del").on("click", function(){
				var totalNum2 = $(".inp_certify").val().replace(/[^0-9]/g, "").slice(0,-1);
				$(".inp_certify").val(totalNum2);
				nowNum2 = totalNum2;
                $(".btn_confirm").attr("disabled",true);
			});
			$(".keypad2 .btn_clear").on("click", function(){
				$(".inp_certify").val("");
				nowNum2 = "";
                $(".btn_confirm").attr("disabled",true);
			});
		},
	}
})();

$(window).on('load', function(){
	
	//lnbswiper
	fn.lnbswiper();

	//productswiper
	fn.productswiper();

	/* 2024-10-02 css로 제어하도록 수정 */
	//resultlist
	/*
	fn.resultlist();

	//cartlist
	fn.cartlist();
	*/

	//keypad
	fn.keypad();

	//keypad2
	fn.keypad2();
	
});